
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="Shreya Rajpal">
      
      
        <link rel="canonical" href="https://getguardrails.ai/getting_started/">
      
      <link rel="icon" href="../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.10">
    
    
      
        <title>Getting Started - Guardrails AI</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.975780f9.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.2505c338.min.css">
        
      
      
  
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
  
  <style>:root{--md-admonition-icon--note:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M2.5 7.775V2.75a.25.25 0 0 1 .25-.25h5.025a.25.25 0 0 1 .177.073l6.25 6.25a.25.25 0 0 1 0 .354l-5.025 5.025a.25.25 0 0 1-.354 0l-6.25-6.25a.25.25 0 0 1-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 0 1 0 2.474l-5.026 5.026a1.75 1.75 0 0 1-2.474 0l-6.25-6.25A1.75 1.75 0 0 1 1 7.775zM6 5a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"/></svg>');--md-admonition-icon--abstract:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M2.5 1.75a.25.25 0 0 1 .25-.25h8.5a.25.25 0 0 1 .25.25v7.736a.75.75 0 1 0 1.5 0V1.75A1.75 1.75 0 0 0 11.25 0h-8.5A1.75 1.75 0 0 0 1 1.75v11.5c0 .966.784 1.75 1.75 1.75h3.17a.75.75 0 0 0 0-1.5H2.75a.25.25 0 0 1-.25-.25V1.75zM4.75 4a.75.75 0 0 0 0 1.5h4.5a.75.75 0 0 0 0-1.5h-4.5zM4 7.75A.75.75 0 0 1 4.75 7h2a.75.75 0 0 1 0 1.5h-2A.75.75 0 0 1 4 7.75zm11.774 3.537a.75.75 0 0 0-1.048-1.074L10.7 14.145 9.281 12.72a.75.75 0 0 0-1.062 1.058l1.943 1.95a.75.75 0 0 0 1.055.008l4.557-4.45z"/></svg>');--md-admonition-icon--info:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 1.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13zM0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm6.5-.25A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75zM8 6a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/></svg>');--md-admonition-icon--tip:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M3.499.75a.75.75 0 0 1 1.5 0v.996C5.9 2.903 6.793 3.65 7.662 4.376l.24.202c-.036-.694.055-1.422.426-2.163C9.1.873 10.794-.045 12.622.26 14.408.558 16 1.94 16 4.25c0 1.278-.954 2.575-2.44 2.734l.146.508.065.22c.203.701.412 1.455.476 2.226.142 1.707-.4 3.03-1.487 3.898C11.714 14.671 10.27 15 8.75 15h-6a.75.75 0 0 1 0-1.5h1.376a4.489 4.489 0 0 1-.563-1.191 3.833 3.833 0 0 1-.05-2.063 4.636 4.636 0 0 1-2.025-.293.75.75 0 1 1 .525-1.406c1.357.507 2.376-.006 2.698-.318l.009-.01a.748.748 0 0 1 1.06 0 .75.75 0 0 1-.012 1.074c-.912.92-.992 1.835-.768 2.586.221.74.745 1.337 1.196 1.621H8.75c1.343 0 2.398-.296 3.074-.836.635-.507 1.036-1.31.928-2.602-.05-.603-.216-1.224-.422-1.93l-.064-.221c-.12-.407-.246-.84-.353-1.29a2.404 2.404 0 0 1-.507-.441 3.063 3.063 0 0 1-.633-1.248.75.75 0 0 1 1.455-.364c.046.185.144.436.31.627.146.168.353.305.712.305.738 0 1.25-.615 1.25-1.25 0-1.47-.95-2.315-2.123-2.51-1.172-.196-2.227.387-2.706 1.345-.46.92-.27 1.774.019 3.062l.042.19a.753.753 0 0 1 .01.05c.348.443.666.949.94 1.553a.75.75 0 1 1-1.365.62c-.553-1.217-1.32-1.94-2.3-2.768a85.08 85.08 0 0 0-.317-.265c-.814-.68-1.75-1.462-2.692-2.619a3.74 3.74 0 0 0-1.023.88c-.406.495-.663 1.036-.722 1.508.116.122.306.21.591.239.388.038.797-.06 1.032-.19a.75.75 0 0 1 .728 1.31c-.515.287-1.23.439-1.906.373-.682-.067-1.473-.38-1.879-1.193L.75 5.677V5.5c0-.984.48-1.94 1.077-2.664.46-.559 1.05-1.055 1.673-1.353V.75z"/></svg>');--md-admonition-icon--success:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.75.75 0 0 1 1.06-1.06L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0z"/></svg>');--md-admonition-icon--question:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 1.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13zM0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm9 3a1 1 0 1 1-2 0 1 1 0 0 1 2 0zM6.92 6.085c.081-.16.19-.299.34-.398.145-.097.371-.187.74-.187.28 0 .553.087.738.225A.613.613 0 0 1 9 6.25c0 .177-.04.264-.077.318a.956.956 0 0 1-.277.245c-.076.051-.158.1-.258.161l-.007.004a7.728 7.728 0 0 0-.313.195 2.416 2.416 0 0 0-.692.661.75.75 0 0 0 1.248.832.956.956 0 0 1 .276-.245 6.3 6.3 0 0 1 .26-.16l.006-.004c.093-.057.204-.123.313-.195.222-.149.487-.355.692-.662.214-.32.329-.702.329-1.15 0-.76-.36-1.348-.863-1.725A2.76 2.76 0 0 0 8 4c-.631 0-1.155.16-1.572.438-.413.276-.68.638-.849.977a.75.75 0 1 0 1.342.67z"/></svg>');--md-admonition-icon--warning:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.22 1.754a.25.25 0 0 0-.44 0L1.698 13.132a.25.25 0 0 0 .22.368h12.164a.25.25 0 0 0 .22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0 1 14.082 15H1.918a1.75 1.75 0 0 1-1.543-2.575L6.457 1.047zM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-.25-5.25a.75.75 0 0 0-1.5 0v2.5a.75.75 0 0 0 1.5 0v-2.5z"/></svg>');--md-admonition-icon--failure:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M3.404 12.596a6.5 6.5 0 1 1 9.192-9.192 6.5 6.5 0 0 1-9.192 9.192zM2.344 2.343a8 8 0 1 0 11.313 11.314A8 8 0 0 0 2.343 2.343zM6.03 4.97a.75.75 0 0 0-1.06 1.06L6.94 8 4.97 9.97a.75.75 0 1 0 1.06 1.06L8 9.06l1.97 1.97a.75.75 0 1 0 1.06-1.06L9.06 8l1.97-1.97a.75.75 0 1 0-1.06-1.06L8 6.94 6.03 4.97z"/></svg>');--md-admonition-icon--danger:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M10.561 1.5a.016.016 0 0 0-.01.004L3.286 8.571A.25.25 0 0 0 3.462 9H6.75a.75.75 0 0 1 .694 1.034l-1.713 4.188 6.982-6.793A.25.25 0 0 0 12.538 7H9.25a.75.75 0 0 1-.683-1.06l2.008-4.418.003-.006a.02.02 0 0 0-.004-.009.02.02 0 0 0-.006-.006L10.56 1.5zM9.504.43a1.516 1.516 0 0 1 2.437 1.713L10.415 5.5h2.123c1.57 0 2.346 1.909 1.22 3.004l-7.34 7.142a1.25 1.25 0 0 1-.871.354h-.302a1.25 1.25 0 0 1-1.157-1.723L5.633 10.5H3.462c-1.57 0-2.346-1.909-1.22-3.004L9.503.429z"/></svg>');--md-admonition-icon--bug:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4.72.22a.75.75 0 0 1 1.06 0l1 .999a3.492 3.492 0 0 1 2.441 0l.999-1a.75.75 0 1 1 1.06 1.061l-.775.776c.616.63.995 1.493.995 2.444v.327c0 .1-.009.197-.025.292.408.14.764.392 1.029.722l1.968-.787a.75.75 0 0 1 .556 1.392L13 7.258V9h2.25a.75.75 0 0 1 0 1.5H13v.5c0 .409-.049.806-.141 1.186l2.17.868a.75.75 0 0 1-.557 1.392l-2.184-.873A4.997 4.997 0 0 1 8 16a4.997 4.997 0 0 1-4.288-2.427l-2.183.873a.75.75 0 0 1-.558-1.392l2.17-.868A5.013 5.013 0 0 1 3 11v-.5H.75a.75.75 0 0 1 0-1.5H3V7.258L.971 6.446a.75.75 0 0 1 .558-1.392l1.967.787c.265-.33.62-.583 1.03-.722a1.684 1.684 0 0 1-.026-.292V4.5c0-.951.38-1.814.995-2.444L4.72 1.28a.75.75 0 0 1 0-1.06zM6.173 5h3.654A.173.173 0 0 0 10 4.827V4.5a2 2 0 1 0-4 0v.327c0 .096.077.173.173.173zM5.25 6.5a.75.75 0 0 0-.75.75V11a3.5 3.5 0 1 0 7 0V7.25a.75.75 0 0 0-.75-.75h-5.5z"/></svg>');--md-admonition-icon--example:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M5 5.782V2.5h-.25a.75.75 0 0 1 0-1.5h6.5a.75.75 0 0 1 0 1.5H11v3.282l3.666 5.76C15.619 13.04 14.543 15 12.767 15H3.233c-1.776 0-2.852-1.96-1.899-3.458L5 5.782zM9.5 2.5h-3V6a.75.75 0 0 1-.117.403L4.73 9h6.54L9.617 6.403A.75.75 0 0 1 9.5 6V2.5zm-6.9 9.847L3.775 10.5h8.45l1.175 1.847a.75.75 0 0 1-.633 1.153H3.233a.75.75 0 0 1-.633-1.153z"/></svg>');--md-admonition-icon--quote:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.75 2.5a.75.75 0 0 0 0 1.5h10.5a.75.75 0 0 0 0-1.5H1.75zm4 5a.75.75 0 0 0 0 1.5h8.5a.75.75 0 0 0 0-1.5h-8.5zm0 5a.75.75 0 0 0 0 1.5h8.5a.75.75 0 0 0 0-1.5h-8.5zM2.5 7.75a.75.75 0 0 0-1.5 0v6a.75.75 0 0 0 1.5 0v-6z"/></svg>');}</style>


    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../css/ansi-colours.css">
    
      <link rel="stylesheet" href="../css/jupyter-cells.css">
    
      <link rel="stylesheet" href="../css/pandas-dataframe.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="Getting Started - Guardrails AI" >
      
        <meta  property="og:description"  content="None" >
      
        <meta  property="og:image"  content="https://getguardrails.ai/assets/images/social/getting_started.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="https://getguardrails.ai/getting_started/" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="Getting Started - Guardrails AI" >
      
        <meta  name="twitter:description"  content="None" >
      
        <meta  name="twitter:image"  content="https://getguardrails.ai/assets/images/social/getting_started.png" >
      
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#getting-started" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
            
<div style="text-align: center">
If you're using Guardrails, join the 
<a rel="me" href="https://discord.gg/Jsey3mX98B">
    <span class="twemoji mastodon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M524.531 69.836a1.5 1.5 0 0 0-.764-.7A485.065 485.065 0 0 0 404.081 32.03a1.816 1.816 0 0 0-1.923.91 337.461 337.461 0 0 0-14.9 30.6 447.848 447.848 0 0 0-134.426 0 309.541 309.541 0 0 0-15.135-30.6 1.89 1.89 0 0 0-1.924-.91 483.689 483.689 0 0 0-119.688 37.107 1.712 1.712 0 0 0-.788.676C39.068 183.651 18.186 294.69 28.43 404.354a2.016 2.016 0 0 0 .765 1.375 487.666 487.666 0 0 0 146.825 74.189 1.9 1.9 0 0 0 2.063-.676A348.2 348.2 0 0 0 208.12 430.4a1.86 1.86 0 0 0-1.019-2.588 321.173 321.173 0 0 1-45.868-21.853 1.885 1.885 0 0 1-.185-3.126 251.047 251.047 0 0 0 9.109-7.137 1.819 1.819 0 0 1 1.9-.256c96.229 43.917 200.41 43.917 295.5 0a1.812 1.812 0 0 1 1.924.233 234.533 234.533 0 0 0 9.132 7.16 1.884 1.884 0 0 1-.162 3.126 301.407 301.407 0 0 1-45.89 21.83 1.875 1.875 0 0 0-1 2.611 391.055 391.055 0 0 0 30.014 48.815 1.864 1.864 0 0 0 2.063.7A486.048 486.048 0 0 0 610.7 405.729a1.882 1.882 0 0 0 .765-1.352c12.264-126.783-20.532-236.912-86.934-334.541ZM222.491 337.58c-28.972 0-52.844-26.587-52.844-59.239s23.409-59.241 52.844-59.241c29.665 0 53.306 26.82 52.843 59.239 0 32.654-23.41 59.241-52.843 59.241Zm195.38 0c-28.971 0-52.843-26.587-52.843-59.239s23.409-59.241 52.843-59.241c29.667 0 53.307 26.82 52.844 59.239 0 32.654-23.177 59.241-52.844 59.241Z"/></svg>
    </span>
    <strong>Discord server</strong>
</a>
to get help and share your work!
</div>

          </div>
          
        </aside>
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Guardrails AI" class="md-header__button md-logo" aria-label="Guardrails AI" data-md-component="logo">
      
  <img src="../img/tracks_white.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Guardrails AI
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Getting Started
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
            </label>
          
        
          
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/ShreyaR/guardrails" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    ShreyaR/guardrails
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Guardrails AI" class="md-nav__button md-logo" aria-label="Guardrails AI" data-md-component="logo">
      
  <img src="../img/tracks_white.png" alt="logo">

    </a>
    Guardrails AI
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/ShreyaR/guardrails" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    ShreyaR/guardrails
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Getting Started
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Getting Started
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#objective" class="md-nav__link">
    Objective
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    Installation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-an-rail-spec" class="md-nav__link">
    Creating an RAIL spec
  </a>
  
    <nav class="md-nav" aria-label="Creating an RAIL spec">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#output-schema" class="md-nav__link">
    Output schema
  </a>
  
    <nav class="md-nav" aria-label="Output schema">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#specifying-structure" class="md-nav__link">
    Specifying structure
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#specifying-quality-criteria" class="md-nav__link">
    Specifying quality criteria
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#specifying-corrective-actions" class="md-nav__link">
    Specifying corrective actions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prompt" class="md-nav__link">
    Prompt
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#full-rail-spec" class="md-nav__link">
    Full rail spec
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-guardrails-to-enforce-the-rail-spec" class="md-nav__link">
    Using Guardrails to enforce the RAIL spec
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#inspecting-logs-to-peek-under-the-hood" class="md-nav__link">
    Inspecting logs to peek under the hood
  </a>
  
    <nav class="md-nav" aria-label="Inspecting logs to peek under the hood">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#inspecting-step-1-getting-llm-output" class="md-nav__link">
    Inspecting Step 1: Getting LLM output
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inspecting-step-2-re-prompting-llm" class="md-nav__link">
    Inspecting Step 2: Re-prompting LLM
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bonus-see-the-full-history-of-calls" class="md-nav__link">
    Bonus: See the full history of calls
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          RAIL Specification
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="RAIL Specification" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          RAIL Specification
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../rail/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../rail/output/" class="md-nav__link">
        Output Element
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../rail/prompt/" class="md-nav__link">
        Prompt Element
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../rail/instructions/" class="md-nav__link">
        Instruction Element
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../rail/script/" class="md-nav__link">
        (Experimental) Script Element
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Guardrails Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Guardrails Reference" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Guardrails Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../guard/" class="md-nav__link">
        Guard
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../data_types/" class="md-nav__link">
        Data Types
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../validation/" class="md-nav__link">
        Validators
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../llm_api_wrappers/" class="md-nav__link">
        LLM API Wrappers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../logs/" class="md-nav__link">
        Inspecting logs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cli/" class="md-nav__link">
        Guardrails CLI
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Examples
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Examples" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Examples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../examples/guardrails_with_chat_models/" class="md-nav__link">
        Use Guardrails with Chat Models
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../examples/select_choice_based_on_action/" class="md-nav__link">
        If condition: generate different JSON objects based on condition
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../examples/extracting_entities/" class="md-nav__link">
        Extracting entities from ToS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../examples/bug_free_python_code/" class="md-nav__link">
        Generating bug-free Python code
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../examples/no_secrets_in_generated_text/" class="md-nav__link">
        No secrets in generated text
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../examples/syntax_error_free_sql/" class="md-nav__link">
        Natural language to bug-free SQL
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../examples/recipe_generation/" class="md-nav__link">
        Vegan Mac & Cheese Recipe Generator
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../examples/valid_chess_moves/" class="md-nav__link">
        Using GPT to play valid chess moves
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../examples/translation_to_specific_language/" class="md-nav__link">
        Translate text with profanity filtering
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../examples/generate_structured_data/" class="md-nav__link">
        Generate structured synthetic data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../examples/translation_with_quality_check/" class="md-nav__link">
        Ensure translated text is high quality
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../examples/text_summarization_quality/" class="md-nav__link">
        Check key info present in generated summary
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Integrations
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Integrations" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Integrations
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations/langchain/" class="md-nav__link">
        LangChain
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations/pydantic_validation/" class="md-nav__link">
        Pydantic
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="https://discord.gg/Jsey3mX98B" class="md-nav__link">
        Discord
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#objective" class="md-nav__link">
    Objective
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    Installation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-an-rail-spec" class="md-nav__link">
    Creating an RAIL spec
  </a>
  
    <nav class="md-nav" aria-label="Creating an RAIL spec">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#output-schema" class="md-nav__link">
    Output schema
  </a>
  
    <nav class="md-nav" aria-label="Output schema">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#specifying-structure" class="md-nav__link">
    Specifying structure
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#specifying-quality-criteria" class="md-nav__link">
    Specifying quality criteria
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#specifying-corrective-actions" class="md-nav__link">
    Specifying corrective actions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prompt" class="md-nav__link">
    Prompt
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#full-rail-spec" class="md-nav__link">
    Full rail spec
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-guardrails-to-enforce-the-rail-spec" class="md-nav__link">
    Using Guardrails to enforce the RAIL spec
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#inspecting-logs-to-peek-under-the-hood" class="md-nav__link">
    Inspecting logs to peek under the hood
  </a>
  
    <nav class="md-nav" aria-label="Inspecting logs to peek under the hood">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#inspecting-step-1-getting-llm-output" class="md-nav__link">
    Inspecting Step 1: Getting LLM output
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inspecting-step-2-re-prompting-llm" class="md-nav__link">
    Inspecting Step 2: Re-prompting LLM
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bonus-see-the-full-history-of-calls" class="md-nav__link">
    Bonus: See the full history of calls
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                



                  

  <a href="https://github.com/ShreyaR/guardrails/edit/master/docs/getting_started.ipynb" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script>
(function() {
  function addWidgetsRenderer() {
    var requireJsScript = document.createElement('script');
    requireJsScript.src = 'https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js';

    var mimeElement = document.querySelector('script[type="application/vnd.jupyter.widget-view+json"]');
    var jupyterWidgetsScript = document.createElement('script');
    var widgetRendererSrc = 'https://unpkg.com/@jupyter-widgets/html-manager@*/dist/embed-amd.js';
    var widgetState;

    // Fallback for older version:
    try {
      widgetState = mimeElement && JSON.parse(mimeElement.innerHTML);

      if (widgetState && (widgetState.version_major < 2 || !widgetState.version_major)) {
        widgetRendererSrc = 'jupyter-js-widgets@*/dist/embed.js';
      }
    } catch(e) {}

    jupyterWidgetsScript.src = widgetRendererSrc;

    document.body.appendChild(requireJsScript);
    document.body.appendChild(jupyterWidgetsScript);
  }

  document.addEventListener('DOMContentLoaded', addWidgetsRenderer);
}());
</script>

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="getting-started">Getting Started</h1>
<p>In this notebook, we will go through the basics of creating a <code>RAIL</code> spec and using Guardrails to enforce it.</p>
<h2 id="objective">Objective</h2>
<p>Our goal is to extract detailed patient information from a medical record. We will use a simple example to demonstrate how Guardrails can be used to enforce a <code>RAIL</code> spec.</p>
<p>As an example, we will use the following medical record:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="language-python highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="n">doctors_notes</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;49 y/o Male with chronic macular rash to face &amp; hair, worse in beard, eyebrows &amp; nares.</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="s2">Itchy, flaky, slightly scaly. Moderate response to OTC steroid cream&quot;&quot;&quot;</span>
</span></code></pre></div>

</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We want our extracted information to contain the following fields:</p>
<ol>
<li>Patient's gender</li>
<li>Patient's age</li>
<li>A list of symptoms, each with a severity rating and an affected area</li>
<li>A list of medications, each with information about the patient's response to the medication</li>
</ol>
<h2 id="installation">Installation</h2>
<p>To get started, install the <code>guardrails</code> package with <code>pip</code>.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="language-python highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="err">!</span><span class="n">pip</span> <span class="n">install</span> <span class="n">guardrails</span><span class="o">-</span><span class="n">ai</span>
</span></code></pre></div>

</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="creating-an-rail-spec">Creating an <code>RAIL</code> spec</h2>
<p>At the heart of <code>Guardrails</code> is the <code>RAIL</code> spec.</p>
<p><code>RAIL</code> a flavor of XML (standing for <strong>R</strong>eliable <strong>AI</strong> markup <strong>L</strong>anguage) that describes the expected structure and type of the output of the LLM, the quality criteria for the output to be valid and corrective actions to be taken if the output is invalid.</p>
<p>A <code>RAIL</code> spec is composed of 3 main components:</p>
<ol>
<li>Output schema</li>
<li>Prompt</li>
<li>(Optional) Script</li>
</ol>
<h3 id="output-schema">Output schema</h3>
<p>We start by creating the output schema. The output schema is a <code>RAIL</code> spec that describes the expected structure and type of the output of the LLM. </p>
<h4 id="specifying-structure">Specifying structure</h4>
<p>As mentioned earlier, we want our extracted information to contain the following fields: gender, age, symptoms, and medications. Using <code>RAIL</code>, we can create fairly complex output schemas. For example, we can specify that a field is a list of objects, etc. We see an example of this below.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">RAIL Spec</label><label for="__tabbed_1_2">Output JSON</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-xml highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="nt">&lt;object</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;patient_info&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="w">    </span><span class="nt">&lt;string</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;gender&quot;</span><span class="w"> </span><span class="na">description=</span><span class="s">&quot;Patient&#39;s gender&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="w">    </span><span class="nt">&lt;integer</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;age&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="w">    </span><span class="nt">&lt;list</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;symptoms&quot;</span><span class="w"> </span><span class="na">description=</span><span class="s">&quot;Symptoms that the patient is currently experiencing. Each symptom should be classified into  separate item in the list.&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="w">        </span><span class="nt">&lt;object&gt;</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="w">            </span><span class="nt">&lt;string</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;symptom&quot;</span><span class="w"> </span><span class="na">description=</span><span class="s">&quot;Symptom that a patient is experiencing&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="w">            </span><span class="nt">&lt;string</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;affected area&quot;</span><span class="w"> </span><span class="na">description=</span><span class="s">&quot;What part of the body the symptom is affecting&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="w">        </span><span class="nt">&lt;/object&gt;</span>
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="w">    </span><span class="nt">&lt;/list&gt;</span>
</span><span id="__span-2-10"><a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a><span class="w">    </span><span class="nt">&lt;list</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;current_meds&quot;</span><span class="w"> </span><span class="na">description=</span><span class="s">&quot;Medications the patient is currently taking and their response&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-2-11"><a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a><span class="w">        </span><span class="nt">&lt;object&gt;</span>
</span><span id="__span-2-12"><a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a><span class="w">            </span><span class="nt">&lt;string</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;medication&quot;</span><span class="w"> </span><span class="na">description=</span><span class="s">&quot;Name of the medication the patient is taking&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-2-13"><a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a><span class="w">            </span><span class="nt">&lt;string</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;response&quot;</span><span class="w"> </span><span class="na">description=</span><span class="s">&quot;How the patient is responding to the medication&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-2-14"><a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a><span class="w">        </span><span class="nt">&lt;/object&gt;</span>
</span><span id="__span-2-15"><a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a><span class="w">    </span><span class="nt">&lt;/list&gt;</span>
</span><span id="__span-2-16"><a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a><span class="nt">&lt;/object&gt;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-json highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="p">{</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="w">    </span><span class="nt">&quot;patient_info&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="w">        </span><span class="nt">&quot;gender&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span><span class="p">,</span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="w">        </span><span class="nt">&quot;age&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span><span class="p">,</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="w">        </span><span class="nt">&quot;symptoms&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="w">            </span><span class="p">{</span>
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="w">                </span><span class="nt">&quot;symptom&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span><span class="p">,</span>
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="w">                </span><span class="nt">&quot;affected area&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span>
</span><span id="__span-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="w">            </span><span class="p">},</span>
</span><span id="__span-3-10"><a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a><span class="w">            </span><span class="err">...</span>
</span><span id="__span-3-11"><a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a><span class="w">        </span><span class="p">],</span>
</span><span id="__span-3-12"><a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a><span class="w">        </span><span class="nt">&quot;current_meds&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-3-13"><a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a><span class="w">            </span><span class="p">{</span>
</span><span id="__span-3-14"><a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a><span class="w">                </span><span class="nt">&quot;medication&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span><span class="p">,</span>
</span><span id="__span-3-15"><a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a><span class="w">                </span><span class="nt">&quot;response&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span>
</span><span id="__span-3-16"><a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a><span class="w">            </span><span class="p">},</span>
</span><span id="__span-3-17"><a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a><span class="w">            </span><span class="err">...</span>
</span><span id="__span-3-18"><a id="__codelineno-3-18" name="__codelineno-3-18" href="#__codelineno-3-18"></a><span class="w">        </span><span class="p">]</span>
</span><span id="__span-3-19"><a id="__codelineno-3-19" name="__codelineno-3-19" href="#__codelineno-3-19"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-3-20"><a id="__codelineno-3-20" name="__codelineno-3-20" href="#__codelineno-3-20"></a><span class="p">}</span>
</span></code></pre></div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="specifying-quality-criteria">Specifying quality criteria</h4>
<p>Next, we want to specify the quality criteria for the output to be valid and corrective actions to be taken if the output is invalid. We can do this by adding a <code>format</code> tag to each field in the output schema. Format tags can either be enforced by Guardrails, or they can only be suggetions to the LLM. You can see the list of validators enforced by Guardrails <a href="../validation/">here</a>. Additionally, you can create your own custom validators, see examples here <a href="../examples/no_secrets_in_generated_text/">1</a>, <a href="../examples/recipe_generation/">2</a>, <a href="../examples/valid_chess_moves/">3</a>.</p>
<p>As an example, for our use case we specify that the <code>affected_area</code> of <code>symptoms</code> should be one of the following: <code>['head', 'neck', 'chest']</code>. For this, we use the <a href="validation.md/#guardrails.validators.ValidChoices"><code>valid-choices</code> validator</a>.</p>
<h4 id="specifying-corrective-actions">Specifying corrective actions</h4>
<p>Additionally, we can specify how to handle invalid output by adding a <code>on-fail-...</code> attribute to an element.</p>
<p>For example, we can specify that if the <code>affected_area</code> of a symptom is not one of the valid choices, we should re-prompt the LLM to correct its output.</p>
<p>We do this by adding the <code>on-fail-valid-choices='reask'</code> attribute to the <code>affected_area</code> field. To see the full list of corrective actions, see <a href="output.md#specifying-corrective-actions">here</a>.</p>
<p>Finally, out updated output schema looks like:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<div class="language-xml highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="nt">&lt;object</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;patient_info&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="w">    </span><span class="nt">&lt;string</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;gender&quot;</span><span class="w"> </span><span class="na">description=</span><span class="s">&quot;Patient&#39;s gender&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="w">    </span><span class="nt">&lt;integer</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;age&quot;</span><span class="w"> </span><span class="na">format=</span><span class="s">&quot;valid-range: 0 100&quot;</span><span class="nt">/&gt;</span><span class="w">  </span><span class="cm">&lt;!-- (1)! --&gt;</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="w">    </span><span class="nt">&lt;list</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;symptoms&quot;</span><span class="w"> </span><span class="na">description=</span><span class="s">&quot;Symptoms that the patient is currently experiencing. Each symptom should be classified into  separate item in the list.&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="w">        </span><span class="nt">&lt;object&gt;</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="w">            </span><span class="nt">&lt;string</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;symptom&quot;</span><span class="w"> </span><span class="na">description=</span><span class="s">&quot;Symptom that a patient is experiencing&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="w">            </span><span class="nt">&lt;string</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;affected area&quot;</span><span class="w"> </span><span class="na">description=</span><span class="s">&quot;What part of the body the symptom is affecting&quot;</span>
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="w">                </span><span class="na">format=</span><span class="s">&quot;valid-choices: {[&#39;head&#39;, &#39;neck&#39;, &#39;chest&#39;]}&quot;</span>
</span><span id="__span-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="w">                </span><span class="na">on-fail-valid-choices=</span><span class="s">&quot;reask&quot;</span>
</span><span id="__span-4-10"><a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a><span class="w">            </span><span class="nt">/&gt;</span><span class="w">  </span><span class="cm">&lt;!-- (2)! --&gt;</span>
</span><span id="__span-4-11"><a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a><span class="w">        </span><span class="nt">&lt;/object&gt;</span>
</span><span id="__span-4-12"><a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a><span class="w">    </span><span class="nt">&lt;/list&gt;</span>
</span><span id="__span-4-13"><a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a><span class="w">    </span><span class="nt">&lt;list</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;current_meds&quot;</span><span class="w"> </span><span class="na">description=</span><span class="s">&quot;Medications the patient is currently taking and their response&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-4-14"><a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a><span class="w">        </span><span class="nt">&lt;object&gt;</span>
</span><span id="__span-4-15"><a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a><span class="w">            </span><span class="nt">&lt;string</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;medication&quot;</span><span class="w"> </span><span class="na">description=</span><span class="s">&quot;Name of the medication the patient is taking&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-4-16"><a id="__codelineno-4-16" name="__codelineno-4-16" href="#__codelineno-4-16"></a><span class="w">            </span><span class="nt">&lt;string</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;response&quot;</span><span class="w"> </span><span class="na">description=</span><span class="s">&quot;How the patient is responding to the medication&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-4-17"><a id="__codelineno-4-17" name="__codelineno-4-17" href="#__codelineno-4-17"></a><span class="w">        </span><span class="nt">&lt;/object&gt;</span>
</span><span id="__span-4-18"><a id="__codelineno-4-18" name="__codelineno-4-18" href="#__codelineno-4-18"></a><span class="w">    </span><span class="nt">&lt;/list&gt;</span>
</span><span id="__span-4-19"><a id="__codelineno-4-19" name="__codelineno-4-19" href="#__codelineno-4-19"></a><span class="nt">&lt;/object&gt;</span>
</span></code></pre></div>
<ol>
<li>We specify the <code>valid-range</code> validator for the <code>age</code> field. This validator takes the min and max arguments, which we pass as <code>0</code> and <code>100</code> respectively.</li>
<li>We specify the <code>valid-choices</code> validator for the <code>affected_area</code> field. This validator will check that the value of the field is one of the choices specified in the <code>format</code> attribute. We specify that if the <code>affected_area</code> field fails the <code>valid-choices</code> validator, we should re-prompt the LLM to correct its output. This is done by setting the <code>on-fail-valid-choices</code> attribute to <code>reask</code>.</li>
</ol>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In order to pass in a list of choices, we wrap the list in curly braces -- <code>{['head', 'neck', 'chest']}</code>. Anything inside the curly braces will be evaluated as a Python expression. This allows us to pass in more complex data structures or objects as arguments to the validator. </p>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="prompt">Prompt</h3>
<p>The prompt contains high level instructions for the LLM, as well as any parameters that need to be substituted at runtime.</p>
<p>For our use case, we create the following prompt:</p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="nt">&lt;prompt&gt;</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>Given<span class="w"> </span>the<span class="w"> </span>following<span class="w"> </span>doctor&#39;s<span class="w"> </span>notes<span class="w"> </span>about<span class="w"> </span>a<span class="w"> </span>patient,
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>please<span class="w"> </span>extract<span class="w"> </span>a<span class="w"> </span>dictionary<span class="w"> </span>that<span class="w"> </span>contains<span class="w"> </span>the<span class="w"> </span>patient&#39;s<span class="w"> </span>information.<span class="w">  </span><span class="cm">&lt;!-- (1)! --&gt;</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>{{doctors_notes}}<span class="w">  </span><span class="cm">&lt;!-- (2)! --&gt;</span>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a>@complete_json_suffix_v2<span class="w">  </span><span class="cm">&lt;!-- (3)! --&gt;</span>
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="nt">&lt;/prompt&gt;</span>
</span></code></pre></div>
<ol>
<li>This is the high level instructions for the LLM.</li>
<li>This is a prompt parameter that will be substituted at runtime. We will see how to do this in the next section.</li>
<li>This is some boilerplate text that formats helps the LLM output a valid JSON object. Guardrails will automatically add this text to the end of the LLM's output. You can see the full list of boilerplate text <a href="https://github.com/ShreyaR/guardrails/blob/main/guardrails/constants.xml">here</a>.</li>
</ol>
<h3 id="full-rail-spec">Full <code>rail</code> spec</h3>
<p>Putting it all together, the full <code>rail</code> spec for our use case looks like. You can see the full spec <a href="https://github.com/ShreyaR/guardrails/blob/main/docs/getting_started.rail">here</a>.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="using-guardrails-to-enforce-the-rail-spec">Using Guardrails to enforce the <code>RAIL</code> spec</h2>
<p>We use the <code>RAIL</code> spec to create a <code>Guard</code> object. The <code>Guard</code> object is used to wrap the LLM API call and enforce the <code>RAIL</code> spec on the output of the LLM call.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="language-python highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="kn">from</span> <span class="nn">rich</span> <span class="kn">import</span> <span class="nb">print</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="kn">import</span> <span class="nn">guardrails</span> <span class="k">as</span> <span class="nn">gd</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="n">guard</span> <span class="o">=</span> <span class="n">gd</span><span class="o">.</span><span class="n">Guard</span><span class="o">.</span><span class="n">from_rail</span><span class="p">(</span><span class="s1">&#39;getting_started.rail&#39;</span><span class="p">)</span>
</span></code></pre></div>

</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can see that the <code>Guard</code> object compiles the <code>RAIL</code> output specification and adds it to the provided prompt.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Next, we call the <code>Guard</code> object with the LLM API call as the first argument and add any additional arguments to the LLM API call as the remaining arguments.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="language-python highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="kn">import</span> <span class="nn">openai</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="kn">import</span> <span class="nn">os</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="c1"># Set your OpenAI API key</span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;OPENAI_API_KEY&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;YOUR_OPENAI_API_KEY&quot;</span>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="c1"># Wrap the OpenAI API call with the `guard` object</span>
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a><span class="n">raw_llm_output</span><span class="p">,</span> <span class="n">validated_output</span> <span class="o">=</span> <span class="n">guard</span><span class="p">(</span>
</span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a>    <span class="n">openai</span><span class="o">.</span><span class="n">Completion</span><span class="o">.</span><span class="n">create</span><span class="p">,</span>
</span><span id="__span-7-10"><a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a>    <span class="n">prompt_params</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;doctors_notes&quot;</span><span class="p">:</span> <span class="n">doctors_notes</span><span class="p">},</span>
</span><span id="__span-7-11"><a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a>    <span class="n">engine</span><span class="o">=</span><span class="s2">&quot;text-davinci-003&quot;</span><span class="p">,</span>
</span><span id="__span-7-12"><a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a>    <span class="n">max_tokens</span><span class="o">=</span><span class="mi">1024</span><span class="p">,</span>
</span><span id="__span-7-13"><a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a>    <span class="n">temperature</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span>
</span><span id="__span-7-14"><a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a><span class="p">)</span>
</span><span id="__span-7-15"><a id="__codelineno-7-15" name="__codelineno-7-15" href="#__codelineno-7-15"></a>
</span><span id="__span-7-16"><a id="__codelineno-7-16" name="__codelineno-7-16" href="#__codelineno-7-16"></a><span class="c1"># Print the validated output from the LLM</span>
</span><span id="__span-7-17"><a id="__codelineno-7-17" name="__codelineno-7-17" href="#__codelineno-7-17"></a><span class="nb">print</span><span class="p">(</span><span class="n">validated_output</span><span class="p">)</span>
</span></code></pre></div>

</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="output_subarea output_stream output_stderr output_text">
<pre>
<code>/Users/shreyarajpal/anaconda3/envs/tiff-env/lib/python3.9/site-packages/eliot/json.py:22: FutureWarning: In the future `np.bool` will be defined as the corresponding NumPy scalar.  (This may have returned Python scalars in past versions.
  if isinstance(o, (numpy.bool, numpy.bool_)):
</code>
</pre>
</div>
</div>
<div class="output_area">
<div class="output_html rendered_html output_subarea ">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"><span style="font-weight: bold">{</span>
    <span style="color: #008000; text-decoration-color: #008000">'patient_info'</span>: <span style="font-weight: bold">{</span>
        <span style="color: #008000; text-decoration-color: #008000">'gender'</span>: <span style="color: #008000; text-decoration-color: #008000">'Male'</span>,
        <span style="color: #008000; text-decoration-color: #008000">'age'</span>: <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">49</span>,
        <span style="color: #008000; text-decoration-color: #008000">'symptoms'</span>: <span style="font-weight: bold">[</span>
            <span style="font-weight: bold">{</span><span style="color: #008000; text-decoration-color: #008000">'symptom'</span>: <span style="color: #008000; text-decoration-color: #008000">'macular rash'</span>, <span style="color: #008000; text-decoration-color: #008000">'affected area'</span>: <span style="color: #008000; text-decoration-color: #008000">'head'</span><span style="font-weight: bold">}</span>,
            <span style="font-weight: bold">{</span><span style="color: #008000; text-decoration-color: #008000">'symptom'</span>: <span style="color: #008000; text-decoration-color: #008000">'itchy, flaky, slightly scaly'</span>, <span style="color: #008000; text-decoration-color: #008000">'affected area'</span>: <span style="color: #008000; text-decoration-color: #008000">'neck'</span><span style="font-weight: bold">}</span>
        <span style="font-weight: bold">]</span>,
        <span style="color: #008000; text-decoration-color: #008000">'current_meds'</span>: <span style="font-weight: bold">[{</span><span style="color: #008000; text-decoration-color: #008000">'medication'</span>: <span style="color: #008000; text-decoration-color: #008000">'OTC steroid cream'</span>, <span style="color: #008000; text-decoration-color: #008000">'response'</span>: <span style="color: #008000; text-decoration-color: #008000">'Moderate'</span><span style="font-weight: bold">}]</span>
    <span style="font-weight: bold">}</span>
<span style="font-weight: bold">}</span>
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can see that our output was structured correctly, and that the values of the <code>affected_area</code> field were one of the valid choices.</p>
<h2 id="inspecting-logs-to-peek-under-the-hood">Inspecting logs to peek under the hood</h2>
<p>Guardrails logs all of the steps it takes to enforce the <code>RAIL</code> spec. We inspect these logs below to see all the steps Guardrails took to enforce the <code>RAIL</code> spec.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="inspecting-step-1-getting-llm-output">Inspecting Step 1: Getting LLM output</h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="language-python highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="nb">print</span><span class="p">(</span><span class="n">guard</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">most_recent_call</span><span class="o">.</span><span class="n">history</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">rich_group</span><span class="p">)</span>
</span></code></pre></div>

</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="output_html rendered_html output_subarea ">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"><span style="background-color: #f0f8ff">╭──────────────────────────────────────────────────── Prompt ─────────────────────────────────────────────────────╮</span>
<span style="background-color: #f0f8ff">│                                                                                                                 │</span>
<span style="background-color: #f0f8ff">│                                                                                                                 │</span>
<span style="background-color: #f0f8ff">│ Given the following doctor's notes about a patient, please extract a dictionary that contains the patient's     │</span>
<span style="background-color: #f0f8ff">│ information.                                                                                                    │</span>
<span style="background-color: #f0f8ff">│                                                                                                                 │</span>
<span style="background-color: #f0f8ff">│ 49 y/o Male with chronic macular rash to face &amp; hair, worse in beard, eyebrows &amp; nares.                         │</span>
<span style="background-color: #f0f8ff">│ Itchy, flaky, slightly scaly. Moderate response to OTC steroid cream                                            │</span>
<span style="background-color: #f0f8ff">│                                                                                                                 │</span>
<span style="background-color: #f0f8ff">│                                                                                                                 │</span>
<span style="background-color: #f0f8ff">│ Given below is XML that describes the information to extract from this document and the tags to extract it      │</span>
<span style="background-color: #f0f8ff">│ into.                                                                                                           │</span>
<span style="background-color: #f0f8ff">│                                                                                                                 │</span>
<span style="background-color: #f0f8ff">│ &lt;output&gt;                                                                                                        │</span>
<span style="background-color: #f0f8ff">│     &lt;object name="patient_info"&gt;                                                                                │</span>
<span style="background-color: #f0f8ff">│         &lt;string name="gender" description="Patient's gender"/&gt;                                                  │</span>
<span style="background-color: #f0f8ff">│         &lt;integer name="age" format="valid-range: min=0 max=100"/&gt;                                               │</span>
<span style="background-color: #f0f8ff">│         &lt;list name="symptoms" description="Symptoms that the patient is currently experiencing. Each symptom    │</span>
<span style="background-color: #f0f8ff">│ should be classified into a separate item in the list."&gt;                                                        │</span>
<span style="background-color: #f0f8ff">│             &lt;object&gt;                                                                                            │</span>
<span style="background-color: #f0f8ff">│                 &lt;string name="symptom" description="Symptom that a patient is experiencing"/&gt;                   │</span>
<span style="background-color: #f0f8ff">│                 &lt;string name="affected area" description="What part of the body the symptom is affecting"       │</span>
<span style="background-color: #f0f8ff">│ format="valid-choices: choices=['head', 'neck', 'chest']"/&gt;                                                     │</span>
<span style="background-color: #f0f8ff">│             &lt;/object&gt;                                                                                           │</span>
<span style="background-color: #f0f8ff">│         &lt;/list&gt;                                                                                                 │</span>
<span style="background-color: #f0f8ff">│         &lt;list name="current_meds" description="Medications the patient is currently taking and their response"&gt; │</span>
<span style="background-color: #f0f8ff">│             &lt;object&gt;                                                                                            │</span>
<span style="background-color: #f0f8ff">│                 &lt;string name="medication" description="Name of the medication the patient is taking"/&gt;          │</span>
<span style="background-color: #f0f8ff">│                 &lt;string name="response" description="How the patient is responding to the medication"/&gt;         │</span>
<span style="background-color: #f0f8ff">│             &lt;/object&gt;                                                                                           │</span>
<span style="background-color: #f0f8ff">│         &lt;/list&gt;                                                                                                 │</span>
<span style="background-color: #f0f8ff">│     &lt;/object&gt;                                                                                                   │</span>
<span style="background-color: #f0f8ff">│ &lt;/output&gt;                                                                                                       │</span>
<span style="background-color: #f0f8ff">│                                                                                                                 │</span>
<span style="background-color: #f0f8ff">│                                                                                                                 │</span>
<span style="background-color: #f0f8ff">│ ONLY return a valid JSON object (no other text is necessary), where the key of the field in JSON is the `name`  │</span>
<span style="background-color: #f0f8ff">│ attribute of the corresponding XML, and the value is of the type specified by the corresponding XML's tag. The  │</span>
<span style="background-color: #f0f8ff">│ JSON MUST conform to the XML format, including any types and format requests e.g. requests for lists, objects   │</span>
<span style="background-color: #f0f8ff">│ and specific types. Be correct and concise.                                                                     │</span>
<span style="background-color: #f0f8ff">│                                                                                                                 │</span>
<span style="background-color: #f0f8ff">│ Here are examples of simple (XML, JSON) pairs that show the expected behavior:                                  │</span>
<span style="background-color: #f0f8ff">│ - `&lt;string name='foo' format='two-words lower-case' /&gt;` =&gt; `{'foo': 'example one'}`                             │</span>
<span style="background-color: #f0f8ff">│ - `&lt;list name='bar'&gt;&lt;string format='upper-case' /&gt;&lt;/list&gt;` =&gt; `{"bar": ['STRING ONE', 'STRING TWO', etc.]}`     │</span>
<span style="background-color: #f0f8ff">│ - `&lt;object name='baz'&gt;&lt;string name="foo" format="capitalize two-words" /&gt;&lt;integer name="index"                  │</span>
<span style="background-color: #f0f8ff">│ format="1-indexed" /&gt;&lt;/object&gt;` =&gt; `{'baz': {'foo': 'Some String', 'index': 1}}`                                │</span>
<span style="background-color: #f0f8ff">│                                                                                                                 │</span>
<span style="background-color: #f0f8ff">│                                                                                                                 │</span>
<span style="background-color: #f0f8ff">╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯</span>
<span style="background-color: #f5f5dc">╭──────────────────────────────────────────────── Raw LLM Output ─────────────────────────────────────────────────╮</span>
<span style="background-color: #f5f5dc">│ {                                                                                                               │</span>
<span style="background-color: #f5f5dc">│     "patient_info": {                                                                                           │</span>
<span style="background-color: #f5f5dc">│         "gender": "Male",                                                                                       │</span>
<span style="background-color: #f5f5dc">│         "age": 49,                                                                                              │</span>
<span style="background-color: #f5f5dc">│         "symptoms": [                                                                                           │</span>
<span style="background-color: #f5f5dc">│             {                                                                                                   │</span>
<span style="background-color: #f5f5dc">│                 "symptom": "macular rash",                                                                      │</span>
<span style="background-color: #f5f5dc">│                 "affected area": "face &amp; hair"                                                                  │</span>
<span style="background-color: #f5f5dc">│             },                                                                                                  │</span>
<span style="background-color: #f5f5dc">│             {                                                                                                   │</span>
<span style="background-color: #f5f5dc">│                 "symptom": "itchy, flaky, slightly scaly",                                                      │</span>
<span style="background-color: #f5f5dc">│                 "affected area": "beard, eyebrows &amp; nares"                                                      │</span>
<span style="background-color: #f5f5dc">│             }                                                                                                   │</span>
<span style="background-color: #f5f5dc">│         ],                                                                                                      │</span>
<span style="background-color: #f5f5dc">│         "current_meds": [                                                                                       │</span>
<span style="background-color: #f5f5dc">│             {                                                                                                   │</span>
<span style="background-color: #f5f5dc">│                 "medication": "OTC steroid cream",                                                              │</span>
<span style="background-color: #f5f5dc">│                 "response": "Moderate"                                                                          │</span>
<span style="background-color: #f5f5dc">│             }                                                                                                   │</span>
<span style="background-color: #f5f5dc">│         ]                                                                                                       │</span>
<span style="background-color: #f5f5dc">│     }                                                                                                           │</span>
<span style="background-color: #f5f5dc">│ }                                                                                                               │</span>
<span style="background-color: #f5f5dc">╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯</span>
<span style="background-color: #f0fff0">╭─────────────────────────────────────────────── Validated Output ────────────────────────────────────────────────╮</span>
<span style="background-color: #f0fff0">│ {                                                                                                               │</span>
<span style="background-color: #f0fff0">│     'patient_info': {                                                                                           │</span>
<span style="background-color: #f0fff0">│         'gender': 'Male',                                                                                       │</span>
<span style="background-color: #f0fff0">│         'age': 49,                                                                                              │</span>
<span style="background-color: #f0fff0">│         'symptoms': [                                                                                           │</span>
<span style="background-color: #f0fff0">│             {                                                                                                   │</span>
<span style="background-color: #f0fff0">│                 'symptom': 'macular rash',                                                                      │</span>
<span style="background-color: #f0fff0">│                 'affected area': ReAsk(                                                                         │</span>
<span style="background-color: #f0fff0">│                     incorrect_value='face &amp; hair',                                                              │</span>
<span style="background-color: #f0fff0">│                     error_message="Value face &amp; hair is not in choices ['head', 'neck', 'chest'].",             │</span>
<span style="background-color: #f0fff0">│                     fix_value=None,                                                                             │</span>
<span style="background-color: #f0fff0">│                     path=['patient_info', 'symptoms', 0, 'affected area']                                       │</span>
<span style="background-color: #f0fff0">│                 )                                                                                               │</span>
<span style="background-color: #f0fff0">│             },                                                                                                  │</span>
<span style="background-color: #f0fff0">│             {                                                                                                   │</span>
<span style="background-color: #f0fff0">│                 'symptom': 'itchy, flaky, slightly scaly',                                                      │</span>
<span style="background-color: #f0fff0">│                 'affected area': ReAsk(                                                                         │</span>
<span style="background-color: #f0fff0">│                     incorrect_value='beard, eyebrows &amp; nares',                                                  │</span>
<span style="background-color: #f0fff0">│                     error_message="Value beard, eyebrows &amp; nares is not in choices ['head', 'neck', 'chest'].", │</span>
<span style="background-color: #f0fff0">│                     fix_value=None,                                                                             │</span>
<span style="background-color: #f0fff0">│                     path=['patient_info', 'symptoms', 1, 'affected area']                                       │</span>
<span style="background-color: #f0fff0">│                 )                                                                                               │</span>
<span style="background-color: #f0fff0">│             }                                                                                                   │</span>
<span style="background-color: #f0fff0">│         ],                                                                                                      │</span>
<span style="background-color: #f0fff0">│         'current_meds': [                                                                                       │</span>
<span style="background-color: #f0fff0">│             {'medication': 'OTC steroid cream', 'response': 'Moderate'}                                         │</span>
<span style="background-color: #f0fff0">│         ]                                                                                                       │</span>
<span style="background-color: #f0fff0">│     }                                                                                                           │</span>
<span style="background-color: #f0fff0">│ }                                                                                                               │</span>
<span style="background-color: #f0fff0">╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯</span>
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can see that the output returned by the LLM contained invalid values for the <code>affected_area</code> field.</p>
<p>On validation, Guardrails created <code>ReAsk</code> objects that contains all of the information needed to re-prompt the LLM to correct its output.</p>
<h3 id="inspecting-step-2-re-prompting-llm">Inspecting Step 2: Re-prompting LLM</h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="language-python highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="nb">print</span><span class="p">(</span><span class="n">guard</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">most_recent_call</span><span class="o">.</span><span class="n">history</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">rich_group</span><span class="p">)</span>
</span></code></pre></div>

</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="output_html rendered_html output_subarea ">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"><span style="background-color: #f0f8ff">╭──────────────────────────────────────────────────── Prompt ─────────────────────────────────────────────────────╮</span>
<span style="background-color: #f0f8ff">│                                                                                                                 │</span>
<span style="background-color: #f0f8ff">│ I was given the following JSON response, which had problems due to incorrect values.                            │</span>
<span style="background-color: #f0f8ff">│                                                                                                                 │</span>
<span style="background-color: #f0f8ff">│ {                                                                                                               │</span>
<span style="background-color: #f0f8ff">│   "patient_info": {                                                                                             │</span>
<span style="background-color: #f0f8ff">│     "symptoms": [                                                                                               │</span>
<span style="background-color: #f0f8ff">│       {                                                                                                         │</span>
<span style="background-color: #f0f8ff">│         "affected area": {                                                                                      │</span>
<span style="background-color: #f0f8ff">│           "incorrect_value": "face &amp; hair",                                                                     │</span>
<span style="background-color: #f0f8ff">│           "error_message": "Value face &amp; hair is not in choices ['head', 'neck', 'chest']."                     │</span>
<span style="background-color: #f0f8ff">│         }                                                                                                       │</span>
<span style="background-color: #f0f8ff">│       },                                                                                                        │</span>
<span style="background-color: #f0f8ff">│       {                                                                                                         │</span>
<span style="background-color: #f0f8ff">│         "affected area": {                                                                                      │</span>
<span style="background-color: #f0f8ff">│           "incorrect_value": "beard, eyebrows &amp; nares",                                                         │</span>
<span style="background-color: #f0f8ff">│           "error_message": "Value beard, eyebrows &amp; nares is not in choices ['head', 'neck', 'chest']."         │</span>
<span style="background-color: #f0f8ff">│         }                                                                                                       │</span>
<span style="background-color: #f0f8ff">│       }                                                                                                         │</span>
<span style="background-color: #f0f8ff">│     ]                                                                                                           │</span>
<span style="background-color: #f0f8ff">│   }                                                                                                             │</span>
<span style="background-color: #f0f8ff">│ }                                                                                                               │</span>
<span style="background-color: #f0f8ff">│                                                                                                                 │</span>
<span style="background-color: #f0f8ff">│ Help me correct the incorrect values based on the given error messages.                                         │</span>
<span style="background-color: #f0f8ff">│                                                                                                                 │</span>
<span style="background-color: #f0f8ff">│ Given below is XML that describes the information to extract from this document and the tags to extract it      │</span>
<span style="background-color: #f0f8ff">│ into.                                                                                                           │</span>
<span style="background-color: #f0f8ff">│                                                                                                                 │</span>
<span style="background-color: #f0f8ff">│ &lt;output&gt;                                                                                                        │</span>
<span style="background-color: #f0f8ff">│     &lt;object name="patient_info"&gt;                                                                                │</span>
<span style="background-color: #f0f8ff">│         &lt;list name="symptoms" description="Symptoms that the patient is currently experiencing. Each symptom    │</span>
<span style="background-color: #f0f8ff">│ should be classified into a separate item in the list."&gt;                                                        │</span>
<span style="background-color: #f0f8ff">│             &lt;object&gt;                                                                                            │</span>
<span style="background-color: #f0f8ff">│                 &lt;string name="affected area" description="What part of the body the symptom is affecting"       │</span>
<span style="background-color: #f0f8ff">│ format="valid-choices: choices=['head', 'neck', 'chest']"/&gt;                                                     │</span>
<span style="background-color: #f0f8ff">│             &lt;/object&gt;                                                                                           │</span>
<span style="background-color: #f0f8ff">│         &lt;/list&gt;                                                                                                 │</span>
<span style="background-color: #f0f8ff">│     &lt;/object&gt;                                                                                                   │</span>
<span style="background-color: #f0f8ff">│ &lt;/output&gt;                                                                                                       │</span>
<span style="background-color: #f0f8ff">│                                                                                                                 │</span>
<span style="background-color: #f0f8ff">│                                                                                                                 │</span>
<span style="background-color: #f0f8ff">│ ONLY return a valid JSON object (no other text is necessary), where the key of the field in JSON is the `name`  │</span>
<span style="background-color: #f0f8ff">│ attribute of the corresponding XML, and the value is of the type specified by the corresponding XML's tag. The  │</span>
<span style="background-color: #f0f8ff">│ JSON MUST conform to the XML format, including any types and format requests e.g. requests for lists, objects   │</span>
<span style="background-color: #f0f8ff">│ and specific types. Be correct and concise. If you are unsure anywhere, enter `None`.                           │</span>
<span style="background-color: #f0f8ff">│                                                                                                                 │</span>
<span style="background-color: #f0f8ff">│ Here are examples of simple (XML, JSON) pairs that show the expected behavior:                                  │</span>
<span style="background-color: #f0f8ff">│ - `&lt;string name='foo' format='two-words lower-case' /&gt;` =&gt; `{{'foo': 'example one'}}`                           │</span>
<span style="background-color: #f0f8ff">│ - `&lt;list name='bar'&gt;&lt;string format='upper-case' /&gt;&lt;/list&gt;` =&gt; `{{"bar": ['STRING ONE', 'STRING TWO', etc.]}}`   │</span>
<span style="background-color: #f0f8ff">│ - `&lt;object name='baz'&gt;&lt;string name="foo" format="capitalize two-words" /&gt;&lt;integer name="index"                  │</span>
<span style="background-color: #f0f8ff">│ format="1-indexed" /&gt;&lt;/object&gt;` =&gt; `{{'baz': {{'foo': 'Some String', 'index': 1}}}}`                            │</span>
<span style="background-color: #f0f8ff">│                                                                                                                 │</span>
<span style="background-color: #f0f8ff">╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯</span>
<span style="background-color: #f5f5dc">╭──────────────────────────────────────────────── Raw LLM Output ─────────────────────────────────────────────────╮</span>
<span style="background-color: #f5f5dc">│ {                                                                                                               │</span>
<span style="background-color: #f5f5dc">│   "patient_info": {                                                                                             │</span>
<span style="background-color: #f5f5dc">│     "symptoms": [                                                                                               │</span>
<span style="background-color: #f5f5dc">│       {                                                                                                         │</span>
<span style="background-color: #f5f5dc">│         "affected area": "head"                                                                                 │</span>
<span style="background-color: #f5f5dc">│       },                                                                                                        │</span>
<span style="background-color: #f5f5dc">│       {                                                                                                         │</span>
<span style="background-color: #f5f5dc">│         "affected area": "neck"                                                                                 │</span>
<span style="background-color: #f5f5dc">│       }                                                                                                         │</span>
<span style="background-color: #f5f5dc">│     ]                                                                                                           │</span>
<span style="background-color: #f5f5dc">│   }                                                                                                             │</span>
<span style="background-color: #f5f5dc">│ }                                                                                                               │</span>
<span style="background-color: #f5f5dc">╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯</span>
<span style="background-color: #f0fff0">╭─────────────────────────────────────────────── Validated Output ────────────────────────────────────────────────╮</span>
<span style="background-color: #f0fff0">│ {                                                                                                               │</span>
<span style="background-color: #f0fff0">│     'patient_info': {                                                                                           │</span>
<span style="background-color: #f0fff0">│         'gender': 'Male',                                                                                       │</span>
<span style="background-color: #f0fff0">│         'age': 49,                                                                                              │</span>
<span style="background-color: #f0fff0">│         'symptoms': [                                                                                           │</span>
<span style="background-color: #f0fff0">│             {'symptom': 'macular rash', 'affected area': 'head'},                                               │</span>
<span style="background-color: #f0fff0">│             {                                                                                                   │</span>
<span style="background-color: #f0fff0">│                 'symptom': 'itchy, flaky, slightly scaly',                                                      │</span>
<span style="background-color: #f0fff0">│                 'affected area': 'neck'                                                                         │</span>
<span style="background-color: #f0fff0">│             }                                                                                                   │</span>
<span style="background-color: #f0fff0">│         ],                                                                                                      │</span>
<span style="background-color: #f0fff0">│         'current_meds': [                                                                                       │</span>
<span style="background-color: #f0fff0">│             {'medication': 'OTC steroid cream', 'response': 'Moderate'}                                         │</span>
<span style="background-color: #f0fff0">│         ]                                                                                                       │</span>
<span style="background-color: #f0fff0">│     }                                                                                                           │</span>
<span style="background-color: #f0fff0">│ }                                                                                                               │</span>
<span style="background-color: #f0fff0">╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯</span>
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The prompt to the LLM was fully constructed by Guardrails. Additionally, the prompt only contained the previously invalid values for the <code>affected_area</code> field.</p>
<p>On receiving the corrected LLM output, Guardrails merges it with the previously invalid values to create a valid output. It then reruns the validation step to ensure that the output is valid, and returns the output to the user.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="bonus-see-the-full-history-of-calls">Bonus: See the full history of calls</h3>
<p>Guardrails also logs the full history of calls made to the LLM. This can be useful for debugging purposes.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="language-python highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="nb">print</span><span class="p">(</span><span class="n">guard</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">most_recent_call</span><span class="o">.</span><span class="n">tree</span><span class="p">)</span>
</span></code></pre></div>

</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="output_html rendered_html output_subarea ">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace">Logs
├── ╭────────────────────────────────────────────────── Step 0 ───────────────────────────────────────────────────╮
│   │ <span style="background-color: #f0f8ff">╭──────────────────────────────────────────────── Prompt ─────────────────────────────────────────────────╮</span> │
│   │ <span style="background-color: #f0f8ff">│                                                                                                         │</span> │
│   │ <span style="background-color: #f0f8ff">│                                                                                                         │</span> │
│   │ <span style="background-color: #f0f8ff">│ Given the following doctor's notes about a patient, please extract a dictionary that contains the       │</span> │
│   │ <span style="background-color: #f0f8ff">│ patient's information.                                                                                  │</span> │
│   │ <span style="background-color: #f0f8ff">│                                                                                                         │</span> │
│   │ <span style="background-color: #f0f8ff">│ 49 y/o Male with chronic macular rash to face &amp; hair, worse in beard, eyebrows &amp; nares.                 │</span> │
│   │ <span style="background-color: #f0f8ff">│ Itchy, flaky, slightly scaly. Moderate response to OTC steroid cream                                    │</span> │
│   │ <span style="background-color: #f0f8ff">│                                                                                                         │</span> │
│   │ <span style="background-color: #f0f8ff">│                                                                                                         │</span> │
│   │ <span style="background-color: #f0f8ff">│ Given below is XML that describes the information to extract from this document and the tags to extract │</span> │
│   │ <span style="background-color: #f0f8ff">│ it into.                                                                                                │</span> │
│   │ <span style="background-color: #f0f8ff">│                                                                                                         │</span> │
│   │ <span style="background-color: #f0f8ff">│ &lt;output&gt;                                                                                                │</span> │
│   │ <span style="background-color: #f0f8ff">│     &lt;object name="patient_info"&gt;                                                                        │</span> │
│   │ <span style="background-color: #f0f8ff">│         &lt;string name="gender" description="Patient's gender"/&gt;                                          │</span> │
│   │ <span style="background-color: #f0f8ff">│         &lt;integer name="age" format="valid-range: min=0 max=100"/&gt;                                       │</span> │
│   │ <span style="background-color: #f0f8ff">│         &lt;list name="symptoms" description="Symptoms that the patient is currently experiencing. Each    │</span> │
│   │ <span style="background-color: #f0f8ff">│ symptom should be classified into a separate item in the list."&gt;                                        │</span> │
│   │ <span style="background-color: #f0f8ff">│             &lt;object&gt;                                                                                    │</span> │
│   │ <span style="background-color: #f0f8ff">│                 &lt;string name="symptom" description="Symptom that a patient is experiencing"/&gt;           │</span> │
│   │ <span style="background-color: #f0f8ff">│                 &lt;string name="affected area" description="What part of the body the symptom is          │</span> │
│   │ <span style="background-color: #f0f8ff">│ affecting" format="valid-choices: choices=['head', 'neck', 'chest']"/&gt;                                  │</span> │
│   │ <span style="background-color: #f0f8ff">│             &lt;/object&gt;                                                                                   │</span> │
│   │ <span style="background-color: #f0f8ff">│         &lt;/list&gt;                                                                                         │</span> │
│   │ <span style="background-color: #f0f8ff">│         &lt;list name="current_meds" description="Medications the patient is currently taking and their    │</span> │
│   │ <span style="background-color: #f0f8ff">│ response"&gt;                                                                                              │</span> │
│   │ <span style="background-color: #f0f8ff">│             &lt;object&gt;                                                                                    │</span> │
│   │ <span style="background-color: #f0f8ff">│                 &lt;string name="medication" description="Name of the medication the patient is taking"/&gt;  │</span> │
│   │ <span style="background-color: #f0f8ff">│                 &lt;string name="response" description="How the patient is responding to the medication"/&gt; │</span> │
│   │ <span style="background-color: #f0f8ff">│             &lt;/object&gt;                                                                                   │</span> │
│   │ <span style="background-color: #f0f8ff">│         &lt;/list&gt;                                                                                         │</span> │
│   │ <span style="background-color: #f0f8ff">│     &lt;/object&gt;                                                                                           │</span> │
│   │ <span style="background-color: #f0f8ff">│ &lt;/output&gt;                                                                                               │</span> │
│   │ <span style="background-color: #f0f8ff">│                                                                                                         │</span> │
│   │ <span style="background-color: #f0f8ff">│                                                                                                         │</span> │
│   │ <span style="background-color: #f0f8ff">│ ONLY return a valid JSON object (no other text is necessary), where the key of the field in JSON is the │</span> │
│   │ <span style="background-color: #f0f8ff">│ `name` attribute of the corresponding XML, and the value is of the type specified by the corresponding  │</span> │
│   │ <span style="background-color: #f0f8ff">│ XML's tag. The JSON MUST conform to the XML format, including any types and format requests e.g.        │</span> │
│   │ <span style="background-color: #f0f8ff">│ requests for lists, objects and specific types. Be correct and concise.                                 │</span> │
│   │ <span style="background-color: #f0f8ff">│                                                                                                         │</span> │
│   │ <span style="background-color: #f0f8ff">│ Here are examples of simple (XML, JSON) pairs that show the expected behavior:                          │</span> │
│   │ <span style="background-color: #f0f8ff">│ - `&lt;string name='foo' format='two-words lower-case' /&gt;` =&gt; `{'foo': 'example one'}`                     │</span> │
│   │ <span style="background-color: #f0f8ff">│ - `&lt;list name='bar'&gt;&lt;string format='upper-case' /&gt;&lt;/list&gt;` =&gt; `{"bar": ['STRING ONE', 'STRING TWO',     │</span> │
│   │ <span style="background-color: #f0f8ff">│ etc.]}`                                                                                                 │</span> │
│   │ <span style="background-color: #f0f8ff">│ - `&lt;object name='baz'&gt;&lt;string name="foo" format="capitalize two-words" /&gt;&lt;integer name="index"          │</span> │
│   │ <span style="background-color: #f0f8ff">│ format="1-indexed" /&gt;&lt;/object&gt;` =&gt; `{'baz': {'foo': 'Some String', 'index': 1}}`                        │</span> │
│   │ <span style="background-color: #f0f8ff">│                                                                                                         │</span> │
│   │ <span style="background-color: #f0f8ff">│                                                                                                         │</span> │
│   │ <span style="background-color: #f0f8ff">╰─────────────────────────────────────────────────────────────────────────────────────────────────────────╯</span> │
│   │ <span style="background-color: #f5f5dc">╭──────────────────────────────────────────── Raw LLM Output ─────────────────────────────────────────────╮</span> │
│   │ <span style="background-color: #f5f5dc">│ {                                                                                                       │</span> │
│   │ <span style="background-color: #f5f5dc">│     "patient_info": {                                                                                   │</span> │
│   │ <span style="background-color: #f5f5dc">│         "gender": "Male",                                                                               │</span> │
│   │ <span style="background-color: #f5f5dc">│         "age": 49,                                                                                      │</span> │
│   │ <span style="background-color: #f5f5dc">│         "symptoms": [                                                                                   │</span> │
│   │ <span style="background-color: #f5f5dc">│             {                                                                                           │</span> │
│   │ <span style="background-color: #f5f5dc">│                 "symptom": "macular rash",                                                              │</span> │
│   │ <span style="background-color: #f5f5dc">│                 "affected area": "face &amp; hair"                                                          │</span> │
│   │ <span style="background-color: #f5f5dc">│             },                                                                                          │</span> │
│   │ <span style="background-color: #f5f5dc">│             {                                                                                           │</span> │
│   │ <span style="background-color: #f5f5dc">│                 "symptom": "itchy, flaky, slightly scaly",                                              │</span> │
│   │ <span style="background-color: #f5f5dc">│                 "affected area": "beard, eyebrows &amp; nares"                                              │</span> │
│   │ <span style="background-color: #f5f5dc">│             }                                                                                           │</span> │
│   │ <span style="background-color: #f5f5dc">│         ],                                                                                              │</span> │
│   │ <span style="background-color: #f5f5dc">│         "current_meds": [                                                                               │</span> │
│   │ <span style="background-color: #f5f5dc">│             {                                                                                           │</span> │
│   │ <span style="background-color: #f5f5dc">│                 "medication": "OTC steroid cream",                                                      │</span> │
│   │ <span style="background-color: #f5f5dc">│                 "response": "Moderate"                                                                  │</span> │
│   │ <span style="background-color: #f5f5dc">│             }                                                                                           │</span> │
│   │ <span style="background-color: #f5f5dc">│         ]                                                                                               │</span> │
│   │ <span style="background-color: #f5f5dc">│     }                                                                                                   │</span> │
│   │ <span style="background-color: #f5f5dc">│ }                                                                                                       │</span> │
│   │ <span style="background-color: #f5f5dc">╰─────────────────────────────────────────────────────────────────────────────────────────────────────────╯</span> │
│   │ <span style="background-color: #f0fff0">╭─────────────────────────────────────────── Validated Output ────────────────────────────────────────────╮</span> │
│   │ <span style="background-color: #f0fff0">│ {                                                                                                       │</span> │
│   │ <span style="background-color: #f0fff0">│     'patient_info': {                                                                                   │</span> │
│   │ <span style="background-color: #f0fff0">│         'gender': 'Male',                                                                               │</span> │
│   │ <span style="background-color: #f0fff0">│         'age': 49,                                                                                      │</span> │
│   │ <span style="background-color: #f0fff0">│         'symptoms': [                                                                                   │</span> │
│   │ <span style="background-color: #f0fff0">│             {                                                                                           │</span> │
│   │ <span style="background-color: #f0fff0">│                 'symptom': 'macular rash',                                                              │</span> │
│   │ <span style="background-color: #f0fff0">│                 'affected area': ReAsk(                                                                 │</span> │
│   │ <span style="background-color: #f0fff0">│                     incorrect_value='face &amp; hair',                                                      │</span> │
│   │ <span style="background-color: #f0fff0">│                     error_message="Value face &amp; hair is not in choices ['head', 'neck', 'chest'].",     │</span> │
│   │ <span style="background-color: #f0fff0">│                     fix_value=None,                                                                     │</span> │
│   │ <span style="background-color: #f0fff0">│                     path=['patient_info', 'symptoms', 0, 'affected area']                               │</span> │
│   │ <span style="background-color: #f0fff0">│                 )                                                                                       │</span> │
│   │ <span style="background-color: #f0fff0">│             },                                                                                          │</span> │
│   │ <span style="background-color: #f0fff0">│             {                                                                                           │</span> │
│   │ <span style="background-color: #f0fff0">│                 'symptom': 'itchy, flaky, slightly scaly',                                              │</span> │
│   │ <span style="background-color: #f0fff0">│                 'affected area': ReAsk(                                                                 │</span> │
│   │ <span style="background-color: #f0fff0">│                     incorrect_value='beard, eyebrows &amp; nares',                                          │</span> │
│   │ <span style="background-color: #f0fff0">│                     error_message="Value beard, eyebrows &amp; nares is not in choices ['head', 'neck',     │</span> │
│   │ <span style="background-color: #f0fff0">│ 'chest'].",                                                                                             │</span> │
│   │ <span style="background-color: #f0fff0">│                     fix_value=None,                                                                     │</span> │
│   │ <span style="background-color: #f0fff0">│                     path=['patient_info', 'symptoms', 1, 'affected area']                               │</span> │
│   │ <span style="background-color: #f0fff0">│                 )                                                                                       │</span> │
│   │ <span style="background-color: #f0fff0">│             }                                                                                           │</span> │
│   │ <span style="background-color: #f0fff0">│         ],                                                                                              │</span> │
│   │ <span style="background-color: #f0fff0">│         'current_meds': [                                                                               │</span> │
│   │ <span style="background-color: #f0fff0">│             {'medication': 'OTC steroid cream', 'response': 'Moderate'}                                 │</span> │
│   │ <span style="background-color: #f0fff0">│         ]                                                                                               │</span> │
│   │ <span style="background-color: #f0fff0">│     }                                                                                                   │</span> │
│   │ <span style="background-color: #f0fff0">│ }                                                                                                       │</span> │
│   │ <span style="background-color: #f0fff0">╰─────────────────────────────────────────────────────────────────────────────────────────────────────────╯</span> │
│   ╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
└── ╭────────────────────────────────────────────────── Step 1 ───────────────────────────────────────────────────╮
    │ <span style="background-color: #f0f8ff">╭──────────────────────────────────────────────── Prompt ─────────────────────────────────────────────────╮</span> │
    │ <span style="background-color: #f0f8ff">│                                                                                                         │</span> │
    │ <span style="background-color: #f0f8ff">│ I was given the following JSON response, which had problems due to incorrect values.                    │</span> │
    │ <span style="background-color: #f0f8ff">│                                                                                                         │</span> │
    │ <span style="background-color: #f0f8ff">│ {                                                                                                       │</span> │
    │ <span style="background-color: #f0f8ff">│   "patient_info": {                                                                                     │</span> │
    │ <span style="background-color: #f0f8ff">│     "symptoms": [                                                                                       │</span> │
    │ <span style="background-color: #f0f8ff">│       {                                                                                                 │</span> │
    │ <span style="background-color: #f0f8ff">│         "affected area": {                                                                              │</span> │
    │ <span style="background-color: #f0f8ff">│           "incorrect_value": "face &amp; hair",                                                             │</span> │
    │ <span style="background-color: #f0f8ff">│           "error_message": "Value face &amp; hair is not in choices ['head', 'neck', 'chest']."             │</span> │
    │ <span style="background-color: #f0f8ff">│         }                                                                                               │</span> │
    │ <span style="background-color: #f0f8ff">│       },                                                                                                │</span> │
    │ <span style="background-color: #f0f8ff">│       {                                                                                                 │</span> │
    │ <span style="background-color: #f0f8ff">│         "affected area": {                                                                              │</span> │
    │ <span style="background-color: #f0f8ff">│           "incorrect_value": "beard, eyebrows &amp; nares",                                                 │</span> │
    │ <span style="background-color: #f0f8ff">│           "error_message": "Value beard, eyebrows &amp; nares is not in choices ['head', 'neck', 'chest']." │</span> │
    │ <span style="background-color: #f0f8ff">│         }                                                                                               │</span> │
    │ <span style="background-color: #f0f8ff">│       }                                                                                                 │</span> │
    │ <span style="background-color: #f0f8ff">│     ]                                                                                                   │</span> │
    │ <span style="background-color: #f0f8ff">│   }                                                                                                     │</span> │
    │ <span style="background-color: #f0f8ff">│ }                                                                                                       │</span> │
    │ <span style="background-color: #f0f8ff">│                                                                                                         │</span> │
    │ <span style="background-color: #f0f8ff">│ Help me correct the incorrect values based on the given error messages.                                 │</span> │
    │ <span style="background-color: #f0f8ff">│                                                                                                         │</span> │
    │ <span style="background-color: #f0f8ff">│ Given below is XML that describes the information to extract from this document and the tags to extract │</span> │
    │ <span style="background-color: #f0f8ff">│ it into.                                                                                                │</span> │
    │ <span style="background-color: #f0f8ff">│                                                                                                         │</span> │
    │ <span style="background-color: #f0f8ff">│ &lt;output&gt;                                                                                                │</span> │
    │ <span style="background-color: #f0f8ff">│     &lt;object name="patient_info"&gt;                                                                        │</span> │
    │ <span style="background-color: #f0f8ff">│         &lt;list name="symptoms" description="Symptoms that the patient is currently experiencing. Each    │</span> │
    │ <span style="background-color: #f0f8ff">│ symptom should be classified into a separate item in the list."&gt;                                        │</span> │
    │ <span style="background-color: #f0f8ff">│             &lt;object&gt;                                                                                    │</span> │
    │ <span style="background-color: #f0f8ff">│                 &lt;string name="affected area" description="What part of the body the symptom is          │</span> │
    │ <span style="background-color: #f0f8ff">│ affecting" format="valid-choices: choices=['head', 'neck', 'chest']"/&gt;                                  │</span> │
    │ <span style="background-color: #f0f8ff">│             &lt;/object&gt;                                                                                   │</span> │
    │ <span style="background-color: #f0f8ff">│         &lt;/list&gt;                                                                                         │</span> │
    │ <span style="background-color: #f0f8ff">│     &lt;/object&gt;                                                                                           │</span> │
    │ <span style="background-color: #f0f8ff">│ &lt;/output&gt;                                                                                               │</span> │
    │ <span style="background-color: #f0f8ff">│                                                                                                         │</span> │
    │ <span style="background-color: #f0f8ff">│                                                                                                         │</span> │
    │ <span style="background-color: #f0f8ff">│ ONLY return a valid JSON object (no other text is necessary), where the key of the field in JSON is the │</span> │
    │ <span style="background-color: #f0f8ff">│ `name` attribute of the corresponding XML, and the value is of the type specified by the corresponding  │</span> │
    │ <span style="background-color: #f0f8ff">│ XML's tag. The JSON MUST conform to the XML format, including any types and format requests e.g.        │</span> │
    │ <span style="background-color: #f0f8ff">│ requests for lists, objects and specific types. Be correct and concise. If you are unsure anywhere,     │</span> │
    │ <span style="background-color: #f0f8ff">│ enter `None`.                                                                                           │</span> │
    │ <span style="background-color: #f0f8ff">│                                                                                                         │</span> │
    │ <span style="background-color: #f0f8ff">│ Here are examples of simple (XML, JSON) pairs that show the expected behavior:                          │</span> │
    │ <span style="background-color: #f0f8ff">│ - `&lt;string name='foo' format='two-words lower-case' /&gt;` =&gt; `{{'foo': 'example one'}}`                   │</span> │
    │ <span style="background-color: #f0f8ff">│ - `&lt;list name='bar'&gt;&lt;string format='upper-case' /&gt;&lt;/list&gt;` =&gt; `{{"bar": ['STRING ONE', 'STRING TWO',    │</span> │
    │ <span style="background-color: #f0f8ff">│ etc.]}}`                                                                                                │</span> │
    │ <span style="background-color: #f0f8ff">│ - `&lt;object name='baz'&gt;&lt;string name="foo" format="capitalize two-words" /&gt;&lt;integer name="index"          │</span> │
    │ <span style="background-color: #f0f8ff">│ format="1-indexed" /&gt;&lt;/object&gt;` =&gt; `{{'baz': {{'foo': 'Some String', 'index': 1}}}}`                    │</span> │
    │ <span style="background-color: #f0f8ff">│                                                                                                         │</span> │
    │ <span style="background-color: #f0f8ff">╰─────────────────────────────────────────────────────────────────────────────────────────────────────────╯</span> │
    │ <span style="background-color: #f5f5dc">╭──────────────────────────────────────────── Raw LLM Output ─────────────────────────────────────────────╮</span> │
    │ <span style="background-color: #f5f5dc">│ {                                                                                                       │</span> │
    │ <span style="background-color: #f5f5dc">│   "patient_info": {                                                                                     │</span> │
    │ <span style="background-color: #f5f5dc">│     "symptoms": [                                                                                       │</span> │
    │ <span style="background-color: #f5f5dc">│       {                                                                                                 │</span> │
    │ <span style="background-color: #f5f5dc">│         "affected area": "head"                                                                         │</span> │
    │ <span style="background-color: #f5f5dc">│       },                                                                                                │</span> │
    │ <span style="background-color: #f5f5dc">│       {                                                                                                 │</span> │
    │ <span style="background-color: #f5f5dc">│         "affected area": "neck"                                                                         │</span> │
    │ <span style="background-color: #f5f5dc">│       }                                                                                                 │</span> │
    │ <span style="background-color: #f5f5dc">│     ]                                                                                                   │</span> │
    │ <span style="background-color: #f5f5dc">│   }                                                                                                     │</span> │
    │ <span style="background-color: #f5f5dc">│ }                                                                                                       │</span> │
    │ <span style="background-color: #f5f5dc">╰─────────────────────────────────────────────────────────────────────────────────────────────────────────╯</span> │
    │ <span style="background-color: #f0fff0">╭─────────────────────────────────────────── Validated Output ────────────────────────────────────────────╮</span> │
    │ <span style="background-color: #f0fff0">│ {                                                                                                       │</span> │
    │ <span style="background-color: #f0fff0">│     'patient_info': {                                                                                   │</span> │
    │ <span style="background-color: #f0fff0">│         'gender': 'Male',                                                                               │</span> │
    │ <span style="background-color: #f0fff0">│         'age': 49,                                                                                      │</span> │
    │ <span style="background-color: #f0fff0">│         'symptoms': [                                                                                   │</span> │
    │ <span style="background-color: #f0fff0">│             {'symptom': 'macular rash', 'affected area': 'head'},                                       │</span> │
    │ <span style="background-color: #f0fff0">│             {                                                                                           │</span> │
    │ <span style="background-color: #f0fff0">│                 'symptom': 'itchy, flaky, slightly scaly',                                              │</span> │
    │ <span style="background-color: #f0fff0">│                 'affected area': 'neck'                                                                 │</span> │
    │ <span style="background-color: #f0fff0">│             }                                                                                           │</span> │
    │ <span style="background-color: #f0fff0">│         ],                                                                                              │</span> │
    │ <span style="background-color: #f0fff0">│         'current_meds': [                                                                               │</span> │
    │ <span style="background-color: #f0fff0">│             {'medication': 'OTC steroid cream', 'response': 'Moderate'}                                 │</span> │
    │ <span style="background-color: #f0fff0">│         ]                                                                                               │</span> │
    │ <span style="background-color: #f0fff0">│     }                                                                                                   │</span> │
    │ <span style="background-color: #f0fff0">│ }                                                                                                       │</span> │
    │ <span style="background-color: #f0fff0">╰─────────────────────────────────────────────────────────────────────────────────────────────────────────╯</span> │
    ╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
</pre>
</div>
</div>
</div>
</div>
</div>





                


              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href=".." class="md-footer__link md-footer__link--prev" aria-label="Previous: Home" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Home
            </div>
          </div>
        </a>
      
      
        
        <a href="../rail/" class="md-footer__link md-footer__link--next" aria-label="Next: Overview" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Overview
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Maintained by <a href="https://github.com/shreyar">Shreya Rajpal</a>.

    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
      
      
    
    <a href="https://twitter.com/guardrails_ai" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://github.com/ShreyaR/guardrails" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://discord.gg/Jsey3mX98B" target="_blank" rel="noopener" title="discord.gg" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M524.531 69.836a1.5 1.5 0 0 0-.764-.7A485.065 485.065 0 0 0 404.081 32.03a1.816 1.816 0 0 0-1.923.91 337.461 337.461 0 0 0-14.9 30.6 447.848 447.848 0 0 0-134.426 0 309.541 309.541 0 0 0-15.135-30.6 1.89 1.89 0 0 0-1.924-.91 483.689 483.689 0 0 0-119.688 37.107 1.712 1.712 0 0 0-.788.676C39.068 183.651 18.186 294.69 28.43 404.354a2.016 2.016 0 0 0 .765 1.375 487.666 487.666 0 0 0 146.825 74.189 1.9 1.9 0 0 0 2.063-.676A348.2 348.2 0 0 0 208.12 430.4a1.86 1.86 0 0 0-1.019-2.588 321.173 321.173 0 0 1-45.868-21.853 1.885 1.885 0 0 1-.185-3.126 251.047 251.047 0 0 0 9.109-7.137 1.819 1.819 0 0 1 1.9-.256c96.229 43.917 200.41 43.917 295.5 0a1.812 1.812 0 0 1 1.924.233 234.533 234.533 0 0 0 9.132 7.16 1.884 1.884 0 0 1-.162 3.126 301.407 301.407 0 0 1-45.89 21.83 1.875 1.875 0 0 0-1 2.611 391.055 391.055 0 0 0 30.014 48.815 1.864 1.864 0 0 0 2.063.7A486.048 486.048 0 0 0 610.7 405.729a1.882 1.882 0 0 0 .765-1.352c12.264-126.783-20.532-236.912-86.934-334.541ZM222.491 337.58c-28.972 0-52.844-26.587-52.844-59.239s23.409-59.241 52.844-59.241c29.665 0 53.306 26.82 52.843 59.239 0 32.654-23.41 59.241-52.843 59.241Zm195.38 0c-28.971 0-52.843-26.587-52.843-59.239s23.409-59.241 52.843-59.241c29.667 0 53.307 26.82 52.844 59.239 0 32.654-23.177 59.241-52.844 59.241Z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.tracking", "navigation.expand", "navigation.sections", "content.code.annotate", "toc.follow"], "search": "../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.5a2dcb6a.min.js"></script>
      
    
    
  </body>
</html>